<!DOCTYPE html>
<html>
<head>
    <title>PayPal Debug Test</title>
    <script src="https://www.paypal.com/sdk/js?client-id=ASUI7q4yAs6anh26J6T_7hLyX0UwUbVWQS-8lgngn9z0W6VX4zrt2y7Q_auiXBAUrzxd1ibBrz22KDAr&currency=USD"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
        .section { margin: 20px 0; padding: 20px; background: white; border-radius: 8px; }
        .error { color: red; background: #ffe6e6; padding: 10px; }
        .success { color: green; background: #e6ffe6; padding: 10px; }
        .info { color: blue; background: #e6f3ff; padding: 10px; }
    </style>
</head>
<body>
    <h1>üîß PayPal SDK Debug Test</h1>
    
    <div class="section">
        <h2>1. SDK Loading Status</h2>
        <div id="sdk-status"></div>
    </div>
    
    <div class="section">
        <h2>2. Console Errors (Check Browser DevTools)</h2>
        <div class="info">Open Browser Developer Tools (F12) ‚Üí Console tab to see any errors</div>
    </div>
    
    <div class="section">
        <h2>3. Simple PayPal Button Test</h2>
        <div id="simple-paypal-button"></div>
        <div id="button-status"></div>
    </div>

    <script>
        console.log('üîç Starting PayPal debug test...');
        
        // Capture any console errors
        window.onerror = function(msg, url, line, col, error) {
            console.error('JavaScript Error:', msg, 'at', url + ':' + line);
            document.getElementById('sdk-status').innerHTML += 
                '<div class="error">JavaScript Error: ' + msg + '</div>';
        };

        // Test SDK loading
        function testSDKLoading() {
            const statusDiv = document.getElementById('sdk-status');
            
            if (typeof paypal === 'undefined') {
                statusDiv.innerHTML = '<div class="error">‚ùå PayPal SDK failed to load</div>';
                console.error('PayPal SDK not loaded');
                return false;
            }
            
            statusDiv.innerHTML = '<div class="success">‚úÖ PayPal SDK loaded successfully</div>';
            console.log('‚úÖ PayPal SDK loaded');
            
            // Test if Buttons function exists
            if (typeof paypal.Buttons === 'function') {
                statusDiv.innerHTML += '<div class="success">‚úÖ PayPal.Buttons function available</div>';
                console.log('‚úÖ PayPal.Buttons available');
                return true;
            } else {
                statusDiv.innerHTML += '<div class="error">‚ùå PayPal.Buttons function not available</div>';
                console.error('PayPal.Buttons not available');
                return false;
            }
        }

        // Simple button test
        function testSimpleButton() {
            const buttonStatus = document.getElementById('button-status');
            
            try {
                console.log('üéØ Attempting to render PayPal button...');
                
                paypal.Buttons({
                    createOrder: function(data, actions) {
                        console.log('üìù Creating order...');
                        return actions.order.create({
                            purchase_units: [{
                                amount: {
                                    value: '10.00'
                                }
                            }]
                        });
                    },
                    onApprove: function(data, actions) {
                        console.log('‚úÖ Payment approved:', data.orderID);
                        buttonStatus.innerHTML = '<div class="success">‚úÖ Button clicked and order approved: ' + data.orderID + '</div>';
                        return actions.order.capture().then(function(details) {
                            console.log('üí∞ Payment captured:', details);
                            buttonStatus.innerHTML += '<div class="success">üí∞ Payment captured successfully!</div>';
                        });
                    },
                    onError: function(err) {
                        console.error('‚ùå PayPal Button Error:', err);
                        buttonStatus.innerHTML = '<div class="error">‚ùå Button Error: ' + JSON.stringify(err) + '</div>';
                    }
                }).render('#simple-paypal-button').then(function() {
                    console.log('‚úÖ PayPal button rendered successfully');
                    buttonStatus.innerHTML = '<div class="success">‚úÖ PayPal button rendered successfully - try clicking it!</div>';
                }).catch(function(error) {
                    console.error('‚ùå Button render failed:', error);
                    buttonStatus.innerHTML = '<div class="error">‚ùå Button render failed: ' + error.message + '</div>';
                });
                
            } catch (error) {
                console.error('‚ùå Exception in button setup:', error);
                buttonStatus.innerHTML = '<div class="error">‚ùå Exception: ' + error.message + '</div>';
            }
        }

        // Wait for DOM and run tests
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ DOM loaded, starting tests...');
            
            setTimeout(function() {
                const sdkLoaded = testSDKLoading();
                if (sdkLoaded) {
                    testSimpleButton();
                }
            }, 1000); // Give SDK time to load
        });
    </script>
</body>
</html>

<!-- Navigation and Layout Header -->
<div id="unified-header"></div>

<!-- Page Scripts -->
<script src="/SirsiNexusPortal/components/universal-navigation.js"></script>
<script src="/SirsiNexusPortal/components/navigation-customizer.js"></script>
<script src="/SirsiNexusPortal/assets/js/shared-theme-toggle.js"></script>

<!-- Authentication Check -->
<script>
    (function() {
        const auth = sessionStorage.getItem('investorAuth');
        if (!auth) {
            window.location.href = '/SirsiNexusPortal/investor-login.html';
            return;
        }
        
        try {
            const authData = JSON.parse(auth);
            const loginTime = new Date(authData.loginTime);
            const now = new Date();
            const hoursSinceLogin = (now - loginTime) / (1000 * 60 * 60);
            
            if (hoursSinceLogin > 24) {
                sessionStorage.removeItem('investorAuth');
                window.location.href = '/SirsiNexusPortal/investor-login.html';
                return;
            }
        } catch (error) {
            console.error('Authentication error:', error);
            sessionStorage.removeItem('investorAuth');
            window.location.href = '/SirsiNexusPortal/investor-login.html';
            return;
        }
    })();
</script>

<!-- Page-specific customization -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Get the current page from URL
        const path = window.location.pathname;
        const pageName = path.split('/').pop().replace('.html', '');
        
        // Add committee menu if we're in the committee section
        if (path.includes('/committee/')) {
            navCustomizer.addCommitteeMenu(pageName);
        }
        
        // Add action buttons based on page
        switch(pageName) {
            case 'data-room':
                navCustomizer.addActionButtons([{
                    label: 'Upload Document',
                    className: 'bg-emerald-600 text-white px-3 py-1.5 rounded-lg hover:bg-emerald-700 transition-colors',
                    onClick: () => showUploadModal()
                }]);
                break;
            case 'kpi-metrics':
                navCustomizer.addActionButtons([{
                    label: 'Export Report',
                    className: 'bg-blue-600 text-white px-3 py-1.5 rounded-lg hover:bg-blue-700 transition-colors',
                    onClick: () => exportMetrics()
                }]);
                break;
        }
    });
</script>

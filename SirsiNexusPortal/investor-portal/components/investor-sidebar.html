<!-- Investor Portal Sidebar Component -->
<!-- Include this in investor portal pages with: 
     <div id="investor-sidebar-container"></div>
     <script>
         fetch('components/investor-sidebar.html')
             .then(response => response.text())
             .then(html => document.getElementById('investor-sidebar-container').innerHTML = html);
     </script>
-->

<!-- Mobile Sidebar Toggle Button -->
<button class="sidebar-toggle" onclick="toggleSidebar()" aria-label="Toggle sidebar">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
</button>

<!-- Sidebar -->
<aside id="sidebar" class="bg-white dark:bg-slate-800 border-r border-gray-200 dark:border-slate-700 fixed left-0 top-16 bottom-0 w-64 z-40 overflow-y-auto">
    <div class="p-4">
        <!-- Main Navigation -->
        <div class="space-y-1">
            <a href="index.html" class="sidebar-link flex items-center px-3 py-2 text-sm font-medium rounded-md" data-page="dashboard">
                <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                </svg>
                Dashboard
            </a>
            <a href="data-room.html" class="sidebar-link flex items-center px-3 py-2 text-sm font-medium rounded-md" data-page="data-room">
                <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                </svg>
                Data Room
            </a>
            <a href="kpi-unit-metrics.html" class="sidebar-link flex items-center px-3 py-2 text-sm font-medium rounded-md" data-page="kpi-metrics">
                <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                </svg>
                KPI Metrics
            </a>
            <a href="committee/" class="sidebar-link flex items-center px-3 py-2 text-sm font-medium rounded-md" data-page="committee">
                <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
                </svg>
                Committee
            </a>
        </div>
        
        <!-- Committee Submenu (hidden by default) -->
        <div id="committee-submenu" class="ml-8 mt-1 space-y-1 hidden">
            <a href="committee/kpi-metrics.html" class="sidebar-link flex items-center px-3 py-2 text-sm rounded-md">
                <span class="text-gray-400 mr-2">•</span>
                KPI Metrics
            </a>
            <a href="committee/market-analysis.html" class="sidebar-link flex items-center px-3 py-2 text-sm rounded-md">
                <span class="text-gray-400 mr-2">•</span>
                Market Analysis
            </a>
            <a href="committee/product-roadmap.html" class="sidebar-link flex items-center px-3 py-2 text-sm rounded-md">
                <span class="text-gray-400 mr-2">•</span>
                Product Roadmap
            </a>
            <a href="committee/sales-strategy.html" class="sidebar-link flex items-center px-3 py-2 text-sm rounded-md">
                <span class="text-gray-400 mr-2">•</span>
                Sales Strategy
            </a>
            <a href="committee/go-to-market.html" class="sidebar-link flex items-center px-3 py-2 text-sm rounded-md">
                <span class="text-gray-400 mr-2">•</span>
                Go-to-Market
            </a>
        </div>
        
        <!-- Resources Section -->
        <div class="mt-8">
            <h3 class="px-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">Resources</h3>
            <div class="mt-2 space-y-1">
                <a href="#" class="sidebar-link flex items-center px-3 py-2 text-sm rounded-md" onclick="downloadReport('financial')">
                    <svg class="w-4 h-4 mr-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
                    </svg>
                    Financial Report
                </a>
                <a href="#" class="sidebar-link flex items-center px-3 py-2 text-sm rounded-md" onclick="downloadReport('quarterly')">
                    <svg class="w-4 h-4 mr-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
                    </svg>
                    Quarterly Update
                </a>
            </div>
        </div>
        
        <!-- Help & Support -->
        <div class="mt-8">
            <h3 class="px-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">Support</h3>
            <div class="mt-2 space-y-1">
                <a href="#" class="sidebar-link flex items-center px-3 py-2 text-sm rounded-md" onclick="openHelp()">
                    <svg class="w-4 h-4 mr-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
                    </svg>
                    Help Center
                </a>
                <a href="#" class="sidebar-link flex items-center px-3 py-2 text-sm rounded-md" onclick="contactSupport()">
                    <svg class="w-4 h-4 mr-3" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                    </svg>
                    Contact Support
                </a>
            </div>
        </div>
    </div>
</aside>

<style>
/* Sidebar Styles */
.sidebar-toggle {
    display: none;
    position: fixed;
    bottom: 1rem;
    right: 1rem;
    width: 3rem;
    height: 3rem;
    background: #3b82f6;
    color: white;
    border-radius: 50%;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    z-index: 40;
    cursor: pointer;
}

@media (max-width: 768px) {
    .sidebar-toggle {
        display: flex;
    }
    
    aside {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
    }
    
    aside.show {
        transform: translateX(0);
    }
}

/* Sidebar link styles */
.sidebar-link {
    color: rgb(55 65 81);
    transition: all 0.15s ease;
}

.dark .sidebar-link {
    color: rgb(209 213 219);
}

.sidebar-link:hover {
    background-color: rgb(249 250 251);
    color: rgb(17 24 39);
}

.dark .sidebar-link:hover {
    background-color: rgb(51 65 85);
    color: rgb(243 244 246);
}

/* Active page highlighting */
.sidebar-link.active {
    background-color: rgb(219 234 254);
    color: rgb(37 99 235);
}

.dark .sidebar-link.active {
    background-color: rgba(37, 99, 235, 0.2);
    color: rgb(96 165 250);
}

/* Ensure main content has proper margin */
main.with-sidebar {
    margin-left: 16rem; /* 256px = w-64 */
}

@media (max-width: 768px) {
    main.with-sidebar {
        margin-left: 0;
    }
}
</style>

<script>
// Sidebar functionality
function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    sidebar.classList.toggle('show');
}

// Close sidebar on mobile when clicking outside
document.addEventListener('click', function(e) {
    const sidebar = document.getElementById('sidebar');
    const toggleBtn = document.querySelector('.sidebar-toggle');
    
    if (window.innerWidth <= 768 && 
        sidebar.classList.contains('show') && 
        !sidebar.contains(e.target) && 
        !toggleBtn.contains(e.target)) {
        sidebar.classList.remove('show');
    }
});

// Highlight current page in sidebar
document.addEventListener('DOMContentLoaded', function() {
    const currentPage = window.location.pathname.split('/').pop() || 'index.html';
    const sidebarLinks = document.querySelectorAll('.sidebar-link');
    
    sidebarLinks.forEach(link => {
        const linkHref = link.getAttribute('href');
        if (linkHref === currentPage || 
            (currentPage === 'index.html' && link.getAttribute('data-page') === 'dashboard') ||
            (currentPage.includes('committee') && link.getAttribute('data-page') === 'committee')) {
            link.classList.add('active');
            
            // Show committee submenu if on committee page
            if (link.getAttribute('data-page') === 'committee') {
                document.getElementById('committee-submenu').classList.remove('hidden');
            }
        }
    });
    
    // Toggle committee submenu
    const committeeLink = document.querySelector('[data-page="committee"]');
    if (committeeLink) {
        committeeLink.addEventListener('click', function(e) {
            if (window.location.pathname.includes('committee')) {
                e.preventDefault();
                const submenu = document.getElementById('committee-submenu');
                submenu.classList.toggle('hidden');
            }
        });
    }
});

// Resource download functions
function downloadReport(type) {
    // Placeholder for download functionality
    alert(`Downloading ${type} report...`);
}

function openHelp() {
    // Placeholder for help center
    alert('Opening help center...');
}

function contactSupport() {
    // Placeholder for contact support
    alert('Opening support contact form...');
}
</script>

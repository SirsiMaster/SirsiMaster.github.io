<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation - SirsiNexus</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    
    <style>
        .sidebar {
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
        }
        .endpoint-card {
            transition: all 0.3s ease;
        }
        .endpoint-card:hover {
            transform: translateX(5px);
        }
        .method-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }
        .method-get { background: #10b981; color: white; }
        .method-post { background: #3b82f6; color: white; }
        .method-put { background: #f59e0b; color: white; }
        .method-patch { background: #8b5cf6; color: white; }
        .method-delete { background: #ef4444; color: white; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white border-b sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <img src="../assets/images/Sirsi_Logo_300ppi_cguiyg.png" alt="Sirsi" class="h-8 w-8 mr-3">
                    <h1 class="text-2xl font-bold text-gray-900">API Documentation</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <select id="versionSelect" class="border rounded px-3 py-1">
                        <option>v1.0.0</option>
                        <option>v0.9.0</option>
                    </select>
                    <button onclick="downloadSDK()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                        <i class="fas fa-download mr-2"></i>Download SDK
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="flex max-w-7xl mx-auto">
        <!-- Sidebar Navigation -->
        <nav class="sidebar w-64 bg-white border-r p-6">
            <div class="mb-6">
                <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3">Getting Started</h3>
                <ul class="space-y-2">
                    <li><a href="#introduction" class="text-gray-700 hover:text-blue-600">Introduction</a></li>
                    <li><a href="#authentication" class="text-gray-700 hover:text-blue-600">Authentication</a></li>
                    <li><a href="#rate-limits" class="text-gray-700 hover:text-blue-600">Rate Limits</a></li>
                    <li><a href="#errors" class="text-gray-700 hover:text-blue-600">Error Handling</a></li>
                </ul>
            </div>
            
            <div class="mb-6">
                <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3">Core APIs</h3>
                <ul class="space-y-2">
                    <li><a href="#users" class="text-gray-700 hover:text-blue-600">Users</a></li>
                    <li><a href="#auth" class="text-gray-700 hover:text-blue-600">Authentication</a></li>
                    <li><a href="#projects" class="text-gray-700 hover:text-blue-600">Projects</a></li>
                    <li><a href="#deployments" class="text-gray-700 hover:text-blue-600">Deployments</a></li>
                    <li><a href="#billing" class="text-gray-700 hover:text-blue-600">Billing</a></li>
                </ul>
            </div>
            
            <div class="mb-6">
                <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3">Advanced</h3>
                <ul class="space-y-2">
                    <li><a href="#webhooks" class="text-gray-700 hover:text-blue-600">Webhooks</a></li>
                    <li><a href="#websockets" class="text-gray-700 hover:text-blue-600">WebSockets</a></li>
                    <li><a href="#batch" class="text-gray-700 hover:text-blue-600">Batch Operations</a></li>
                </ul>
            </div>
            
            <div class="mb-6">
                <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3">SDKs</h3>
                <ul class="space-y-2">
                    <li><a href="#sdk-javascript" class="text-gray-700 hover:text-blue-600">JavaScript</a></li>
                    <li><a href="#sdk-python" class="text-gray-700 hover:text-blue-600">Python</a></li>
                    <li><a href="#sdk-go" class="text-gray-700 hover:text-blue-600">Go</a></li>
                    <li><a href="#sdk-java" class="text-gray-700 hover:text-blue-600">Java</a></li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="flex-1 p-8">
            <!-- Introduction Section -->
            <section id="introduction" class="mb-12">
                <h2 class="text-3xl font-bold mb-4">Introduction</h2>
                <p class="text-gray-600 mb-4">
                    Welcome to the SirsiNexus API documentation. Our API provides programmatic access to SirsiNexus 
                    functionality, allowing you to build powerful integrations and automate your workflows.
                </p>
                
                <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6">
                    <p class="text-blue-700">
                        <strong>Base URL:</strong> <code class="bg-blue-100 px-2 py-1 rounded">https://api.sirsi.ai/v1</code>
                    </p>
                </div>
                
                <h3 class="text-xl font-semibold mb-3">Quick Start</h3>
                <pre><code class="language-bash"># Install the SDK
npm install @sirsi/sdk

# Or using yarn
yarn add @sirsi/sdk</code></pre>
                
                <h3 class="text-xl font-semibold mt-6 mb-3">Example Request</h3>
                <pre><code class="language-javascript">import SirsiSDK from '@sirsi/sdk';

const sirsi = new SirsiSDK({
    apiKey: 'your-api-key',
    environment: 'production'
});

// Get current user
const user = await sirsi.users.getCurrentUser();
console.log(user);</code></pre>
            </section>

            <!-- Authentication Section -->
            <section id="authentication" class="mb-12">
                <h2 class="text-3xl font-bold mb-4">Authentication</h2>
                <p class="text-gray-600 mb-4">
                    The SirsiNexus API uses API keys to authenticate requests. You can generate an API key from your 
                    dashboard settings page.
                </p>
                
                <h3 class="text-xl font-semibold mb-3">Using API Keys</h3>
                <p class="text-gray-600 mb-4">Include your API key in the Authorization header:</p>
                
                <pre><code class="language-bash">curl https://api.sirsi.ai/v1/users/me \
  -H "Authorization: Bearer your-api-key"</code></pre>
                
                <h3 class="text-xl font-semibold mt-6 mb-3">OAuth 2.0</h3>
                <p class="text-gray-600 mb-4">For third-party applications, we support OAuth 2.0 authentication:</p>
                
                <div class="bg-gray-100 rounded-lg p-6">
                    <table class="w-full">
                        <tr class="border-b">
                            <td class="py-2 font-semibold">Authorization URL</td>
                            <td><code>https://auth.sirsi.ai/oauth/authorize</code></td>
                        </tr>
                        <tr class="border-b">
                            <td class="py-2 font-semibold">Token URL</td>
                            <td><code>https://auth.sirsi.ai/oauth/token</code></td>
                        </tr>
                        <tr>
                            <td class="py-2 font-semibold">Scopes</td>
                            <td><code>read write admin</code></td>
                        </tr>
                    </table>
                </div>
            </section>

            <!-- Rate Limits Section -->
            <section id="rate-limits" class="mb-12">
                <h2 class="text-3xl font-bold mb-4">Rate Limits</h2>
                <p class="text-gray-600 mb-4">
                    API requests are rate limited to ensure fair usage and system stability.
                </p>
                
                <div class="bg-gray-100 rounded-lg p-6">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b">
                                <th class="text-left py-2">Plan</th>
                                <th class="text-left py-2">Requests/Hour</th>
                                <th class="text-left py-2">Burst Limit</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b">
                                <td class="py-2">Free</td>
                                <td>1,000</td>
                                <td>100/min</td>
                            </tr>
                            <tr class="border-b">
                                <td class="py-2">Pro</td>
                                <td>10,000</td>
                                <td>500/min</td>
                            </tr>
                            <tr>
                                <td class="py-2">Enterprise</td>
                                <td>Unlimited</td>
                                <td>Custom</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <h3 class="text-xl font-semibold mt-6 mb-3">Rate Limit Headers</h3>
                <pre><code class="language-bash">X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1640995200</code></pre>
            </section>

            <!-- Users API Section -->
            <section id="users" class="mb-12">
                <h2 class="text-3xl font-bold mb-4">Users API</h2>
                
                <!-- Get Current User -->
                <div class="endpoint-card bg-white rounded-lg shadow p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <span class="method-badge method-get">GET</span>
                        <code class="ml-3 text-lg">/users/me</code>
                    </div>
                    <p class="text-gray-600 mb-4">Get the currently authenticated user</p>
                    
                    <h4 class="font-semibold mb-2">Response</h4>
                    <pre><code class="language-json">{
  "id": "user_123abc",
  "email": "user@example.com",
  "name": "John Doe",
  "role": "admin",
  "createdAt": "2024-01-01T00:00:00Z",
  "plan": {
    "name": "Pro",
    "limits": {
      "projects": 10,
      "deployments": 100
    }
  }
}</code></pre>
                </div>

                <!-- Update User -->
                <div class="endpoint-card bg-white rounded-lg shadow p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <span class="method-badge method-patch">PATCH</span>
                        <code class="ml-3 text-lg">/users/{userId}</code>
                    </div>
                    <p class="text-gray-600 mb-4">Update user information</p>
                    
                    <h4 class="font-semibold mb-2">Request Body</h4>
                    <pre><code class="language-json">{
  "name": "Jane Doe",
  "preferences": {
    "theme": "dark",
    "notifications": true
  }
}</code></pre>
                    
                    <h4 class="font-semibold mb-2 mt-4">Response</h4>
                    <pre><code class="language-json">{
  "id": "user_123abc",
  "email": "user@example.com",
  "name": "Jane Doe",
  "updatedAt": "2024-01-02T00:00:00Z"
}</code></pre>
                </div>

                <!-- List Users (Admin) -->
                <div class="endpoint-card bg-white rounded-lg shadow p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <span class="method-badge method-get">GET</span>
                        <code class="ml-3 text-lg">/users</code>
                        <span class="ml-3 text-sm bg-yellow-100 text-yellow-800 px-2 py-1 rounded">Admin Only</span>
                    </div>
                    <p class="text-gray-600 mb-4">List all users (requires admin permissions)</p>
                    
                    <h4 class="font-semibold mb-2">Query Parameters</h4>
                    <table class="w-full mb-4">
                        <tr class="border-b">
                            <td class="py-2"><code>page</code></td>
                            <td>Page number (default: 1)</td>
                        </tr>
                        <tr class="border-b">
                            <td class="py-2"><code>limit</code></td>
                            <td>Results per page (default: 20, max: 100)</td>
                        </tr>
                        <tr>
                            <td class="py-2"><code>role</code></td>
                            <td>Filter by role (user, admin)</td>
                        </tr>
                    </table>
                </div>
            </section>

            <!-- Projects API Section -->
            <section id="projects" class="mb-12">
                <h2 class="text-3xl font-bold mb-4">Projects API</h2>
                
                <!-- Create Project -->
                <div class="endpoint-card bg-white rounded-lg shadow p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <span class="method-badge method-post">POST</span>
                        <code class="ml-3 text-lg">/projects</code>
                    </div>
                    <p class="text-gray-600 mb-4">Create a new project</p>
                    
                    <h4 class="font-semibold mb-2">Request Body</h4>
                    <pre><code class="language-json">{
  "name": "My Project",
  "description": "Project description",
  "framework": "react",
  "environment": {
    "NODE_ENV": "production"
  }
}</code></pre>
                    
                    <h4 class="font-semibold mb-2 mt-4">Response</h4>
                    <pre><code class="language-json">{
  "id": "proj_xyz789",
  "name": "My Project",
  "status": "active",
  "url": "https://my-project.sirsi.ai",
  "createdAt": "2024-01-01T00:00:00Z"
}</code></pre>
                </div>

                <!-- Deploy Project -->
                <div class="endpoint-card bg-white rounded-lg shadow p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <span class="method-badge method-post">POST</span>
                        <code class="ml-3 text-lg">/projects/{projectId}/deploy</code>
                    </div>
                    <p class="text-gray-600 mb-4">Deploy a project</p>
                    
                    <h4 class="font-semibold mb-2">Request Body</h4>
                    <pre><code class="language-json">{
  "branch": "main",
  "environment": "production",
  "autoScale": true
}</code></pre>
                </div>
            </section>

            <!-- Webhooks Section -->
            <section id="webhooks" class="mb-12">
                <h2 class="text-3xl font-bold mb-4">Webhooks</h2>
                <p class="text-gray-600 mb-4">
                    Webhooks allow you to receive real-time notifications when events occur in your SirsiNexus account.
                </p>
                
                <h3 class="text-xl font-semibold mb-3">Available Events</h3>
                <ul class="list-disc list-inside text-gray-600 mb-6">
                    <li><code>deployment.created</code> - New deployment started</li>
                    <li><code>deployment.succeeded</code> - Deployment completed successfully</li>
                    <li><code>deployment.failed</code> - Deployment failed</li>
                    <li><code>project.created</code> - New project created</li>
                    <li><code>project.deleted</code> - Project deleted</li>
                    <li><code>billing.payment.succeeded</code> - Payment processed</li>
                    <li><code>billing.payment.failed</code> - Payment failed</li>
                </ul>
                
                <h3 class="text-xl font-semibold mb-3">Webhook Payload</h3>
                <pre><code class="language-json">{
  "id": "evt_abc123",
  "type": "deployment.succeeded",
  "created": "2024-01-01T00:00:00Z",
  "data": {
    "projectId": "proj_xyz789",
    "deploymentId": "dep_123456",
    "environment": "production",
    "url": "https://my-project.sirsi.ai"
  }
}</code></pre>
                
                <h3 class="text-xl font-semibold mt-6 mb-3">Verifying Webhook Signatures</h3>
                <pre><code class="language-javascript">const crypto = require('crypto');

function verifyWebhookSignature(payload, signature, secret) {
    const hash = crypto
        .createHmac('sha256', secret)
        .update(payload)
        .digest('hex');
    
    return hash === signature;
}</code></pre>
            </section>

            <!-- SDK Examples Section -->
            <section id="sdk-javascript" class="mb-12">
                <h2 class="text-3xl font-bold mb-4">JavaScript SDK</h2>
                
                <h3 class="text-xl font-semibold mb-3">Installation</h3>
                <pre><code class="language-bash">npm install @sirsi/sdk</code></pre>
                
                <h3 class="text-xl font-semibold mt-6 mb-3">Initialization</h3>
                <pre><code class="language-javascript">import SirsiSDK from '@sirsi/sdk';

const sirsi = new SirsiSDK({
    apiKey: process.env.SIRSI_API_KEY,
    environment: 'production'
});</code></pre>
                
                <h3 class="text-xl font-semibold mt-6 mb-3">Complete Example</h3>
                <pre><code class="language-javascript">// Create a project
const project = await sirsi.projects.create({
    name: 'My App',
    framework: 'react'
});

// Deploy the project
const deployment = await sirsi.deployments.create({
    projectId: project.id,
    branch: 'main',
    environment: 'production'
});

// Monitor deployment status
const status = await sirsi.deployments.getStatus(deployment.id);
console.log('Deployment status:', status);

// Set up webhook
const webhook = await sirsi.webhooks.create({
    url: 'https://my-app.com/webhooks',
    events: ['deployment.succeeded', 'deployment.failed']
});</code></pre>
            </section>

            <!-- Error Handling Section -->
            <section id="errors" class="mb-12">
                <h2 class="text-3xl font-bold mb-4">Error Handling</h2>
                <p class="text-gray-600 mb-4">
                    The API uses standard HTTP status codes to indicate success or failure of requests.
                </p>
                
                <div class="bg-gray-100 rounded-lg p-6 mb-6">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b">
                                <th class="text-left py-2">Status Code</th>
                                <th class="text-left py-2">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b">
                                <td class="py-2"><code>200</code></td>
                                <td>Success</td>
                            </tr>
                            <tr class="border-b">
                                <td class="py-2"><code>201</code></td>
                                <td>Created</td>
                            </tr>
                            <tr class="border-b">
                                <td class="py-2"><code>400</code></td>
                                <td>Bad Request - Invalid parameters</td>
                            </tr>
                            <tr class="border-b">
                                <td class="py-2"><code>401</code></td>
                                <td>Unauthorized - Invalid API key</td>
                            </tr>
                            <tr class="border-b">
                                <td class="py-2"><code>403</code></td>
                                <td>Forbidden - Insufficient permissions</td>
                            </tr>
                            <tr class="border-b">
                                <td class="py-2"><code>404</code></td>
                                <td>Not Found</td>
                            </tr>
                            <tr class="border-b">
                                <td class="py-2"><code>429</code></td>
                                <td>Too Many Requests - Rate limit exceeded</td>
                            </tr>
                            <tr>
                                <td class="py-2"><code>500</code></td>
                                <td>Internal Server Error</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <h3 class="text-xl font-semibold mb-3">Error Response Format</h3>
                <pre><code class="language-json">{
  "error": {
    "code": "invalid_request",
    "message": "The request parameters are invalid",
    "details": {
      "field": "email",
      "reason": "Invalid email format"
    }
  }
}</code></pre>
            </section>
        </main>
    </div>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Download SDK function
        function downloadSDK() {
            alert('SDK download will be available soon!');
        }

        // Highlight active section in navigation
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('section[id]');
            const scrollY = window.pageYOffset;

            sections.forEach(section => {
                const sectionHeight = section.offsetHeight;
                const sectionTop = section.offsetTop - 100;
                const sectionId = section.getAttribute('id');
                
                if (scrollY > sectionTop && scrollY <= sectionTop + sectionHeight) {
                    document.querySelector(`a[href="#${sectionId}"]`)?.classList.add('text-blue-600', 'font-semibold');
                } else {
                    document.querySelector(`a[href="#${sectionId}"]`)?.classList.remove('text-blue-600', 'font-semibold');
                }
            });
        });
    </script>
</body>
</html>
